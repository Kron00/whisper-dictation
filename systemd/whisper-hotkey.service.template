[Unit]
Description=Whisper Dictation Hotkey Listener
After=graphical.target whisper-daemon.service ydotoold.service
Wants=whisper-daemon.service ydotoold.service

[Service]
ExecStartPre=$HOME/.local/bin/ydotool-wait
ExecStart=/usr/bin/python3 $HOME/.local/bin/whisper-hotkey
# Restart on any failure, with rate limiting
Restart=always
RestartSec=2
# Stop restarting after 10 failures in 1 minute
StartLimitIntervalSec=60
StartLimitBurst=10

[Install]
WantedBy=default.target
